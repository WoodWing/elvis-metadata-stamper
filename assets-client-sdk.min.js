!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("AssetsClientSdk",[],t):"object"==typeof exports?exports.AssetsClientSdk=t():e.AssetsClientSdk=t()}(window,(function(){return function(e){var t={};function s(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,s),r.l=!0,r.exports}return s.m=e,s.c=t,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=3)}([function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.INITIALIZE="assets.initialize",e.FETCH_RESPONSE="assets.fetch-response",e.UPDATE_CONTEXT="assets.update-context",e.LOGIN_COMPLETE="assets.login-complete"}(t.ResponseMessageType||(t.ResponseMessageType={})),function(e){e.INITIALIZE_OK="assets.initialize-ok",e.FETCH="assets.fetch",e.CANCEL_CHECKOUT="assets.cancel-checkout",e.CHECKIN="assets.checkin",e.CHECKOUT="assets.checkout",e.CLOSE="assets.close",e.LOGIN="assets.login",e.PIN_COLLECTIONS="assets.pin-collections",e.OPEN_COLLECTIONS="assets.open-collections",e.OPEN_ASSETS="assets.open-assets",e.OPEN_SEARCH="assets.open-search",e.OPEN_BROWSE="assets.open-browse"}(t.RequestMessageType||(t.RequestMessageType={}))},function(e,t,s){"use strict";var n=this&&this.__awaiter||function(e,t,s,n){return new(s||(s=Promise))((function(r,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});t.ProxyRequestStrategy=class{constructor(e){this.proxy=e}handle(e,t){const{method:s="POST",body:n,skipCsrf:r=!1,asJson:i=!1}=t;return this.proxy(e,{method:s,body:n,skipCsrf:r,asJson:i}).then(e=>{if(e.error)throw e.error;return e})}};t.FetchRequestStrategy=class{constructor(e){this.getCsrfToken=e}handle(e,t){return n(this,void 0,void 0,(function*(){const{method:s="POST",body:r,skipCsrf:i=!1,asJson:o=!1}=t,a={};i||(a["X-CSRF-TOKEN"]=yield this.getCsrfToken()),o&&(a["Content-Type"]="application/json;charset=utf-8");const c={method:s,body:o?JSON.stringify(r):this.asFormData(r),headers:a,credentials:"include"};return"GET"===s&&(e=`${e}?${new URLSearchParams(r).toString()}`,delete c.body),fetch(e,c).then(e=>n(this,void 0,void 0,(function*(){if(e.ok)return e.json();let t;try{t=yield e.json()}catch(s){t={errorcode:e.status,errorname:e.statusText}}throw t}))).then(e=>e)}))}asFormData(e){if(!e)return null;const t=new FormData;return Object.keys(e).forEach(s=>t.append(s,e[s])),t}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.HandlerLoginStrategy=class{constructor(e){this.loginHandler=e}login(e){return this.loginHandler(e)}};t.ConcreteLoginStrategy=class{constructor(e,t,s,n,r){this.serverUrl=e,this.requestStrategy=t,this.clientType=s,this.credentials=btoa(`${n}:${r}`)}login(e){return this.requestStrategy.handle(this.serverUrl+"/services/login",{method:"POST",body:Object.assign({cred:this.credentials,clientType:this.clientType},e),skipCsrf:!0}).then(e=>{if(!e.loginSuccess)throw e.loginFaultMessage;return e}).catch(e=>{console.error("Unable to authenticate, cause: "+JSON.stringify(e))})}}},function(e,t,s){"use strict";function n(e){for(var s in e)t.hasOwnProperty(s)||(t[s]=e[s])}Object.defineProperty(t,"__esModule",{value:!0}),n(s(4)),n(s(7))},function(e,t,s){"use strict";function n(e){for(var s in e)t.hasOwnProperty(s)||(t[s]=e[s])}Object.defineProperty(t,"__esModule",{value:!0}),n(s(5)),n(s(6))},function(e,t,s){"use strict";var n=this&&this.__awaiter||function(e,t,s,n){return new(s||(s=Promise))((function(r,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=s(0),i=s(9);class o{constructor(e){this._clientUrlWhitelist=e,this._listeners=[],this._subscribers=[],this.login=()=>this.wrapCommand(null,r.RequestMessageType.LOGIN,r.ResponseMessageType.LOGIN_COMPLETE),this.fetch=(e,t)=>{const s=i.v4();return this.wrapCommand({resource:e,options:t,requestId:s},r.RequestMessageType.FETCH,r.ResponseMessageType.FETCH_RESPONSE).then(e=>{if(e.error)throw e.error;return e})},this.processMessage=e=>{if(!this._clientUrlWhitelist.includes(e.origin))return;this.log("Received message: "+e.data.type,e.data);const t=e.data;this._listeners.filter(e=>e.messageType===t.type&&(!e.requestId||e.requestId===t.requestId)).forEach(s=>{t.type===r.ResponseMessageType.INITIALIZE&&(this._connectedClientUrl=e.origin),s.callback(t.data),s.persistent||this.removeListener(s)})},this.onUpdateContext=e=>{this._context=e,this._subscribers.forEach(e=>e(this._context))}}get context(){return this._context}static get(e){return n(this,void 0,void 0,(function*(){return this._instance?Promise.resolve(this._instance):(this._instance=new o(e),yield this._instance.initialize(),this._instance)}))}subscribe(e){return this._subscribers.push(e),()=>{this._subscribers=this._subscribers.filter(t=>t!==e)}}hasSelection(){return!!this._context.activeTab.originalAssetSelection.length}hasFilteredSelection(){return!!this._context.activeTab.assetSelection.length}isSingleItem(){return 1===this._context.activeTab.originalAssetSelection.length}openSearch(e,t){this.wrapCommand({query:e,sort:t},r.RequestMessageType.OPEN_SEARCH)}openBrowse(e,t=!0,s=null,n=null){this.wrapCommand({folderPath:e,includeSubFolders:t,q:s,sort:n},r.RequestMessageType.OPEN_BROWSE)}openAssets(e){this.wrapCommand({assetIds:e},r.RequestMessageType.OPEN_ASSETS)}checkout(e){this.wrapCommand({assetIds:e},r.RequestMessageType.CHECKOUT)}checkin(e){this.wrapCommand({assetIds:e},r.RequestMessageType.CHECKIN)}cancelCheckout(e){this.wrapCommand({assetIds:e},r.RequestMessageType.CANCEL_CHECKOUT)}openCollections(e){this.wrapCommand({containerIds:e},r.RequestMessageType.OPEN_COLLECTIONS)}pinCollections(e){this.wrapCommand({containerIds:e},r.RequestMessageType.PIN_COLLECTIONS)}close(){this.wrapCommand(null,r.RequestMessageType.CLOSE)}wrapCommand(e,t,s){return this.postMessage({data:e,type:t}),s?new Promise(t=>this.addListener(s,t,!1,e.requestId)):Promise.resolve(null)}addListener(e,t,s,n){const r={messageType:e,callback:t,persistent:s,requestId:n};return this._listeners.push(r),()=>this.removeListener(r)}removeListener(e){this._listeners=this._listeners.filter(t=>t!==e)}postMessage(e){this.log("Sending message: "+e.type,e.data),window.parent.postMessage(Object.assign(e,{id:this._context.plugin.id}),this._connectedClientUrl)}initialize(){return new Promise(e=>{this.addListener(r.ResponseMessageType.INITIALIZE,t=>{this.onUpdateContext(t),this.postMessage({type:r.RequestMessageType.INITIALIZE_OK}),e()}),this.addListener(r.ResponseMessageType.UPDATE_CONTEXT,this.onUpdateContext,!0),window.addEventListener("message",this.processMessage)})}log(e,t){console.log("[Assets Plugin Context] "+e,t)}}t.AssetsPluginContext=o;t.LegacyElvisContextWrapper=class{constructor(e){this.pluginContext=e,this.hasSelection=this.pluginContext.hasSelection.bind(this.pluginContext),this.hasFilteredSelection=this.pluginContext.hasFilteredSelection.bind(this.pluginContext),this.isSingleItem=this.pluginContext.isSingleItem.bind(this.pluginContext),this.openSearch=this.pluginContext.openSearch.bind(this.pluginContext),this.openBrowse=this.pluginContext.openBrowse.bind(this.pluginContext),this.close=this.pluginContext.close.bind(this.pluginContext),Object.assign(this,this.pluginContext.context),e.subscribe(e=>{Object.assign(this,e),this.updateCallback&&"function"==typeof this.updateCallback&&this.updateCallback(e)})}openAssets(e){this.pluginContext.openAssets(e.split(","))}openContainers(e){this.pluginContext.openCollections(e.split(","))}checkout(e){this.pluginContext.checkout(e.split(","))}checkin(e){this.pluginContext.checkin(e.split(","))}cancelCheckout(e){this.pluginContext.cancelCheckout(e.split(","))}activateContainers(e){this.pluginContext.pinCollections(e.split(","))}login(){this.pluginContext.login().then(()=>{this.loginCompleteCallback&&"function"==typeof this.loginCompleteCallback&&this.loginCompleteCallback()})}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var s in e)t.hasOwnProperty(s)||(t[s]=e[s])}(s(0))},function(e,t,s){"use strict";function n(e){for(var s in e)t.hasOwnProperty(s)||(t[s]=e[s])}Object.defineProperty(t,"__esModule",{value:!0}),n(s(8)),n(s(2)),n(s(1))},function(e,t,s){"use strict";var n=this&&this.__awaiter||function(e,t,s,n){return new(s||(s=Promise))((function(r,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=s(1),i=s(2);class o{constructor(e){this._messages=e}getString(e,...t){let s=this._messages[e];return null==s?e:(t.length&&(s=this.substitute(s,t)),s)}substitute(e,t){return t.reduce((e,t,s)=>e.replace(new RegExp(`\\{${s}\\}`,"g"),t),e)}}class a{constructor(e,t){this._serverUrl=e,this._messages=new o({}),this._requestStrategy=t?new r.ProxyRequestStrategy(t):new r.FetchRequestStrategy(this.csrf.bind(this)),this._csrfToken=window.localStorage.getItem("assets.csrfToken")}get messages(){return this._messages}static standalone(e,t,s,n){const r=new a(e);return r.useAutoLogin(t,s,n),r}static fromPluginContext(e){const t=new a("",e.fetch);return t.useLoginHandler(e.login),t}useAutoLogin(e,t,s){this._loginStrategy=new i.ConcreteLoginStrategy(this._serverUrl,this._requestStrategy,s,e,t)}useLoginHandler(e){this._loginStrategy=new i.HandlerLoginStrategy(e)}login(e){if(this._loginAttemptPromise)return this._loginAttemptPromise;this._loginAttemptPromise=this._loginStrategy.login(e).then(e=>{e&&e.csrfToken&&(this._csrfToken=e.csrfToken),this._loginAttemptPromise=null})}getProfile(){return this.handleRequest(this._serverUrl+"/services/profile")}logout(){return this.handleRequest(this._serverUrl+"/services/logout")}search(e){return this.handleRequest(this._serverUrl+"/services/search",{body:Object.assign({num:"50",metadataToReturn:"all"},e)})}browse(e){return this.handleRequest(this._serverUrl+"/services/browse",{body:e})}update(e,t){return this.handleRequest(this._serverUrl+"/services/update",{body:Object.assign({id:e},t)})}updatebulk(e,t){return this.handleRequest(this._serverUrl+"/services/updatebulk",{body:Object.assign({q:e},t)})}create(e){return this.handleRequest(this._serverUrl+"/services/create",{body:e})}createFolder(e){return this.handleRequest(this._serverUrl+"/services/folder/create",{body:e})}copy(e){return this.handleRequest(this._serverUrl+"/services/copy",{body:e})}move(e){return this.handleRequest(this._serverUrl+"/services/move",{body:e})}createRelation(e){return this.handleRequest(this._serverUrl+"/services/createRelation",{body:e})}removeRelation(e){return this.handleRequest(this._serverUrl+"/services/removeRelation",{body:e})}remove(e){return this.handleRequest(this._serverUrl+"/services/remove",{body:e})}fieldinfo(){return this.handleRequest(this._serverUrl+"/services/fieldinfo")}csrf(e=!1){return this._csrfToken&&!e?Promise.resolve(this._csrfToken):this.handleRequest(this._serverUrl+"/services/csrf",{method:"GET",skipCsrf:!0}).then(e=>(this._csrfToken=e.csrfToken,window.localStorage.setItem("assets.csrfToken",e.csrfToken),e.csrfToken))}loadMessages(e=navigator.language){return this.handleRequest(this._serverUrl+"/services/messages",{body:{localeChain:e},skipCsrf:!0,method:"GET"}).then(e=>(this._messages=new o(e),Object.assign({},e)))}onSuccess(e){if(e.errorcode)throw e;return e}handleRequest(e,t={},s=!0){return n(this,void 0,void 0,(function*(){const n=()=>this._requestStrategy.handle(e,t).then(this.onSuccess);try{return yield n()}catch(n){if(!n.errorcode||![401,403].includes(n.errorcode))throw n;if(!this._loginStrategy)throw"Not logged in and no login strategy configured";if(!s)throw"Unable to perform call after logging in. This may be caused by cross-domain access issues.";return 403==n.errorcode&&"CsrfTokenMismatch"===n.errorname?yield this.csrf(!0):yield this.login(),yield this.handleRequest(e,t,!1)}}))}}t.AssetsApiClient=a;t.LegacyElvisApiWrapper=class{constructor(e){this.apiClient=e,this.useAutoLogin=this.apiClient.useAutoLogin.bind(this.apiClient),this.useLoginHandler=this.apiClient.useLoginHandler.bind(this.apiClient)}get messages(){return this.apiClient.messages}loadMessages(e,t,s){const n=this.apiClient.loadMessages(s);t&&n.then(t)}useLoginPage(e){this.apiClient.useLoginHandler(()=>new Promise(()=>{window.location.assign(e)}))}usePluginContextAuthentication(){throw"No longer used! Instantiate your AssetsApiClient with the fromPluginContext function."}login(e,t,s,n){e&&t&&(n=Object.assign(n||{},{cred:btoa(`${e}:${t}`)}));const r=this.apiClient.login(n);s&&r.then(s)}getProfile(e){const t=this.apiClient.getProfile();e&&t.then(e)}logout(e){if(e&&"function"!=typeof e)throw"Redirects after login are no longer supported, use the callback function for this purpose";const t=this.apiClient.logout();e&&t.then(e)}search(e,t){const s=this.apiClient.search(e);t&&s.then(t)}browse(e,t){const s=this.apiClient.browse(e);t&&s.then(t)}update(e,t,s){const n=this.apiClient.update(e,t);s&&n.then(s)}updatebulk(e,t,s){const n=this.apiClient.updatebulk(e,t);s&&n.then(s)}create(e,t){const s=this.apiClient.create(e);t&&s.then(t)}createFolder(e,t){const s=this.apiClient.createFolder(e);t&&s.then(t)}copy(e,t){const s=this.apiClient.copy(e);t&&s.then(t)}move(e,t){const s=this.apiClient.move(e);t&&s.then(t)}createRelation(e,t){const s=this.apiClient.createRelation(e);t&&s.then(t)}removeRelation(e,t){const s=this.apiClient.removeRelation(e);t&&s.then(t)}remove(e,t){const s=this.apiClient.remove(e);t&&s.then(t)}fieldinfo(e){const t=this.apiClient.fieldinfo();e&&t.then(e)}csrf(e){const t=this.apiClient.csrf();e&&t.then(e)}},t.queryForSelection=e=>{if(0===e.length)return"";return`(${e.map(e=>"id:"+e.id).join(" OR ")})`},t.queryForFolderSelection=e=>{if(0===e.length)return"";return`(${e.map(e=>`ancestorPaths:"${e.assetPath}"`).join(" OR ")})`};class c{static resolveElvisContext(){throw"Instantiate the LegacyElvisContextWrapper manually."}static resolveQueryString(){throw"Please use the queryString properties on the AssetsPluginContext object instead"}}t.LegacyElvisPlugin=c,c.queryForSelection=t.queryForSelection,c.queryForFolderSelection=t.queryForFolderSelection;t.AssetPermissions=class{static hasViewPreview(e){return e&&-1!=e.indexOf("P")}static hasUseOriginal(e){return e&&-1!=e.indexOf("U")}}},function(e,t,s){"use strict";s.r(t),s.d(t,"v1",(function(){return p})),s.d(t,"v3",(function(){return w})),s.d(t,"v4",(function(){return S})),s.d(t,"v5",(function(){return R}));var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),r=new Uint8Array(16);function i(){if(!n)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(r)}for(var o=[],a=0;a<256;++a)o.push((a+256).toString(16).substr(1));var c,u,l=function(e,t){var s=t||0,n=o;return(n[e[s+0]]+n[e[s+1]]+n[e[s+2]]+n[e[s+3]]+"-"+n[e[s+4]]+n[e[s+5]]+"-"+n[e[s+6]]+n[e[s+7]]+"-"+n[e[s+8]]+n[e[s+9]]+"-"+n[e[s+10]]+n[e[s+11]]+n[e[s+12]]+n[e[s+13]]+n[e[s+14]]+n[e[s+15]]).toLowerCase()},h=0,d=0;var p=function(e,t,s){var n=t&&s||0,r=t||[],o=(e=e||{}).node||c,a=void 0!==e.clockseq?e.clockseq:u;if(null==o||null==a){var p=e.random||(e.rng||i)();null==o&&(o=c=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==a&&(a=u=16383&(p[6]<<8|p[7]))}var f=void 0!==e.msecs?e.msecs:Date.now(),g=void 0!==e.nsecs?e.nsecs:d+1,y=f-h+(g-d)/1e4;if(y<0&&void 0===e.clockseq&&(a=a+1&16383),(y<0||f>h)&&void 0===e.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");h=f,d=g,u=a;var v=(1e4*(268435455&(f+=122192928e5))+g)%4294967296;r[n++]=v>>>24&255,r[n++]=v>>>16&255,r[n++]=v>>>8&255,r[n++]=255&v;var C=f/4294967296*1e4&268435455;r[n++]=C>>>8&255,r[n++]=255&C,r[n++]=C>>>24&15|16,r[n++]=C>>>16&255,r[n++]=a>>>8|128,r[n++]=255&a;for(var m=0;m<6;++m)r[n+m]=o[m];return t||l(r)};var f=function(e,t,s){function n(e,n,r,i){var o=r&&i||0;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],s=0;s<e.length;++s)t.push(e.charCodeAt(s));return t}(e)),"string"==typeof n&&(n=function(e){var t=[];return e.replace(/[a-fA-F0-9]{2}/g,(function(e){t.push(parseInt(e,16))})),t}(n)),!Array.isArray(e))throw TypeError("value must be an array of bytes");if(!Array.isArray(n)||16!==n.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");var a=s(n.concat(e));if(a[6]=15&a[6]|t,a[8]=63&a[8]|128,r)for(var c=0;c<16;++c)r[o+c]=a[c];return r||l(a)}try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n};function g(e){return 14+(e+64>>>9<<4)+1}function y(e,t){var s=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(s>>16)<<16|65535&s}function v(e,t,s,n,r,i){return y((o=y(y(t,e),y(n,i)))<<(a=r)|o>>>32-a,s);var o,a}function C(e,t,s,n,r,i,o){return v(t&s|~t&n,e,t,r,i,o)}function m(e,t,s,n,r,i,o){return v(t&n|s&~n,e,t,r,i,o)}function b(e,t,s,n,r,i,o){return v(t^s^n,e,t,r,i,o)}function _(e,t,s,n,r,i,o){return v(s^(t|~n),e,t,r,i,o)}var w=f("v3",48,(function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var s=0;s<t.length;++s)e[s]=t.charCodeAt(s)}return function(e){for(var t=[],s=32*e.length,n=0;n<s;n+=8){var r=e[n>>5]>>>n%32&255,i=parseInt("0123456789abcdef".charAt(r>>>4&15)+"0123456789abcdef".charAt(15&r),16);t.push(i)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[g(t)-1]=t;for(var s=1732584193,n=-271733879,r=-1732584194,i=271733878,o=0;o<e.length;o+=16){var a=s,c=n,u=r,l=i;s=C(s,n,r,i,e[o],7,-680876936),i=C(i,s,n,r,e[o+1],12,-389564586),r=C(r,i,s,n,e[o+2],17,606105819),n=C(n,r,i,s,e[o+3],22,-1044525330),s=C(s,n,r,i,e[o+4],7,-176418897),i=C(i,s,n,r,e[o+5],12,1200080426),r=C(r,i,s,n,e[o+6],17,-1473231341),n=C(n,r,i,s,e[o+7],22,-45705983),s=C(s,n,r,i,e[o+8],7,1770035416),i=C(i,s,n,r,e[o+9],12,-1958414417),r=C(r,i,s,n,e[o+10],17,-42063),n=C(n,r,i,s,e[o+11],22,-1990404162),s=C(s,n,r,i,e[o+12],7,1804603682),i=C(i,s,n,r,e[o+13],12,-40341101),r=C(r,i,s,n,e[o+14],17,-1502002290),n=C(n,r,i,s,e[o+15],22,1236535329),s=m(s,n,r,i,e[o+1],5,-165796510),i=m(i,s,n,r,e[o+6],9,-1069501632),r=m(r,i,s,n,e[o+11],14,643717713),n=m(n,r,i,s,e[o],20,-373897302),s=m(s,n,r,i,e[o+5],5,-701558691),i=m(i,s,n,r,e[o+10],9,38016083),r=m(r,i,s,n,e[o+15],14,-660478335),n=m(n,r,i,s,e[o+4],20,-405537848),s=m(s,n,r,i,e[o+9],5,568446438),i=m(i,s,n,r,e[o+14],9,-1019803690),r=m(r,i,s,n,e[o+3],14,-187363961),n=m(n,r,i,s,e[o+8],20,1163531501),s=m(s,n,r,i,e[o+13],5,-1444681467),i=m(i,s,n,r,e[o+2],9,-51403784),r=m(r,i,s,n,e[o+7],14,1735328473),n=m(n,r,i,s,e[o+12],20,-1926607734),s=b(s,n,r,i,e[o+5],4,-378558),i=b(i,s,n,r,e[o+8],11,-2022574463),r=b(r,i,s,n,e[o+11],16,1839030562),n=b(n,r,i,s,e[o+14],23,-35309556),s=b(s,n,r,i,e[o+1],4,-1530992060),i=b(i,s,n,r,e[o+4],11,1272893353),r=b(r,i,s,n,e[o+7],16,-155497632),n=b(n,r,i,s,e[o+10],23,-1094730640),s=b(s,n,r,i,e[o+13],4,681279174),i=b(i,s,n,r,e[o],11,-358537222),r=b(r,i,s,n,e[o+3],16,-722521979),n=b(n,r,i,s,e[o+6],23,76029189),s=b(s,n,r,i,e[o+9],4,-640364487),i=b(i,s,n,r,e[o+12],11,-421815835),r=b(r,i,s,n,e[o+15],16,530742520),n=b(n,r,i,s,e[o+2],23,-995338651),s=_(s,n,r,i,e[o],6,-198630844),i=_(i,s,n,r,e[o+7],10,1126891415),r=_(r,i,s,n,e[o+14],15,-1416354905),n=_(n,r,i,s,e[o+5],21,-57434055),s=_(s,n,r,i,e[o+12],6,1700485571),i=_(i,s,n,r,e[o+3],10,-1894986606),r=_(r,i,s,n,e[o+10],15,-1051523),n=_(n,r,i,s,e[o+1],21,-2054922799),s=_(s,n,r,i,e[o+8],6,1873313359),i=_(i,s,n,r,e[o+15],10,-30611744),r=_(r,i,s,n,e[o+6],15,-1560198380),n=_(n,r,i,s,e[o+13],21,1309151649),s=_(s,n,r,i,e[o+4],6,-145523070),i=_(i,s,n,r,e[o+11],10,-1120210379),r=_(r,i,s,n,e[o+2],15,718787259),n=_(n,r,i,s,e[o+9],21,-343485551),s=y(s,a),n=y(n,c),r=y(r,u),i=y(i,l)}return[s,n,r,i]}(function(e){if(0===e.length)return[];for(var t=8*e.length,s=new Uint32Array(g(t)),n=0;n<t;n+=8)s[n>>5]|=(255&e[n/8])<<n%32;return s}(e),8*e.length))}));var S=function(e,t,s){"string"==typeof e&&(t="binary"===e?new Uint8Array(16):null,e=null);var n=(e=e||{}).random||(e.rng||i)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){for(var r=s||0,o=0;o<16;++o)t[r+o]=n[o];return t}return l(n)};function T(e,t,s,n){switch(e){case 0:return t&s^~t&n;case 1:return t^s^n;case 2:return t&s^t&n^s&n;case 3:return t^s^n}}function O(e,t){return e<<t|e>>>32-t}var R=f("v5",80,(function(e){var t=[1518500249,1859775393,2400959708,3395469782],s=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var n=unescape(encodeURIComponent(e));e=[];for(var r=0;r<n.length;++r)e.push(n.charCodeAt(r))}e.push(128);for(var i=e.length/4+2,o=Math.ceil(i/16),a=new Array(o),c=0;c<o;++c){for(var u=new Uint32Array(16),l=0;l<16;++l)u[l]=e[64*c+4*l]<<24|e[64*c+4*l+1]<<16|e[64*c+4*l+2]<<8|e[64*c+4*l+3];a[c]=u}a[o-1][14]=8*(e.length-1)/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=8*(e.length-1)&4294967295;for(var h=0;h<o;++h){for(var d=new Uint32Array(80),p=0;p<16;++p)d[p]=a[h][p];for(var f=16;f<80;++f)d[f]=O(d[f-3]^d[f-8]^d[f-14]^d[f-16],1);for(var g=s[0],y=s[1],v=s[2],C=s[3],m=s[4],b=0;b<80;++b){var _=Math.floor(b/20),w=O(g,5)+T(_,y,v,C)+m+t[_]+d[b]>>>0;m=C,C=v,v=O(y,30)>>>0,y=g,g=w}s[0]=s[0]+g>>>0,s[1]=s[1]+y>>>0,s[2]=s[2]+v>>>0,s[3]=s[3]+C>>>0,s[4]=s[4]+m>>>0}return[s[0]>>24&255,s[0]>>16&255,s[0]>>8&255,255&s[0],s[1]>>24&255,s[1]>>16&255,s[1]>>8&255,255&s[1],s[2]>>24&255,s[2]>>16&255,s[2]>>8&255,255&s[2],s[3]>>24&255,s[3]>>16&255,s[3]>>8&255,255&s[3],s[4]>>24&255,s[4]>>16&255,s[4]>>8&255,255&s[4]]}))}])}));